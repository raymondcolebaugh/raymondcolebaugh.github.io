<div id="search">
    <div class="input-group hide">
        <input type="text" id="search-input" placeholder="Search..." />
        <div class="input-group-addon"><i class="fa fa-search"></i></div>
    </div>
    <noscript>Enable JavaScript to use search suggestions with Algolia</noscript>
    {% image Algolia_logo_bg-white.jpg alt:'Powered by Algolia' %}
</div>

<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.min.js"></script>
<script>
$(function() {
    $("#search .input-group").removeClass('hide');
    var client = algoliasearch('VTA7XL87VN', 'bbda21ebd6d41e8c63693c92ddd88304');
    var index = client.initIndex('colebaugh.com');
    autocomplete('#search-input', {hint: false}, [
            {
                source: autocomplete.sources.hits(index, {hitsPerPage: 10}),
                displayKey: 'title',
                templates: {
                    suggestion: function(suggestion) {
                        if (suggestion._highlightResult.title) {
                            return suggestion._highlightResult.title.value;
                        }
                    }
                }
            }
    ]).on('autocomplete:selected', function(event, suggestion, dataset) {
        console.log(suggestion, dataset);
        _paq.push(['trackSiteSearch', $("#search-input").val(), false, false]);
        window.location.href = suggestion.url;
    });
});
</script>

